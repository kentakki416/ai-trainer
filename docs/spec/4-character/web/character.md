# トレちゃんキャラクターアニメーション実装方法

Duolingoの緑のフクロウのような、Web上で歩いたりジャンプしたりするキャラクター「トレちゃん」の実装方法を検討します。

---

## 実現方法案

### 1. Lottie (After Effects animations) ⭐️ **推奨**

**概要**
- 「Figma」「Adobe After Effects」「Lottie Creator」で作成したアニメーションをJSONファイルとして出力し、Webで再生
- Duolingoが実際に使用している可能性が最も高い手法
- ベクターベースでファイルサイズが小さく、高品質なアニメーション

**メリット**
- ファイルサイズが小さい（JSONベース、数KB〜数十KB）
- 解像度に依存しない（ベクターベース）
- インタラクティブな制御が可能（再生、停止、速度変更、特定フレームへのジャンプ）
- 豊富なライブラリとコミュニティ
- Web/モバイル（iOS/Android/React Native）すべてに対応

**デメリット**
- After Effectsの習得が必要（またはデザイナーとの協業）
- 複雑な物理演算やインタラクションには向かない
- Bodymovin（AE拡張機能）の使用が必要

---

### 2. Rive (旧称 Flare)

**概要**
- リアルタイムでインタラクティブなアニメーションを作成できる専用ツール
- ステートマシンを使って複雑なアニメーション遷移を実装可能
- Duolingoのような反応型キャラクターに最適

**メリット**
- 専用エディタで直感的にアニメーション作成
- ステートマシンによる複雑なアニメーション制御
- リアルタイムのインタラクション（クリック、ホバー、スクロールなど）
- ファイルサイズが非常に小さい（.rivファイル）
- デザイン変更が容易
- Lottieより高度な制御が可能

**デメリット**
- Rive専用エディタの習得が必要
- Lottieほど普及していない（コミュニティは小さめ）

---

### 3. CSS Animations + Sprite Sheets

**概要**
- スプライトシート（複数フレームを1枚にまとめた画像）をCSSアニメーションで切り替え
- 最もシンプルで軽量な実装方法

**メリット**
- 実装が非常に簡単
- 外部ライブラリ不要
- パフォーマンスが良い
- 静的なアニメーションに最適

**デメリット**
- 解像度に依存する（画像ベース）
- ファイルサイズが大きくなりがち
- 動的な制御が困難
- デザイン変更時はスプライトシート全体を作り直す必要がある

---

### 4. Framer Motion + SVG

**概要**
- ReactでSVGアニメーションを制御するライブラリ
- コンポーネントベースで宣言的にアニメーションを記述

**メリット**
- Reactとの統合が優れている
- 宣言的で直感的なAPI
- ジェスチャー認識が組み込み
- 解像度に依存しない（SVG）
- TypeScript完全対応

**デメリット**
- 複雑なキャラクターアニメーションには手間がかかる
- SVG（コード管理）でアニメーションを作成するのが大変
- 

---

### 5. Canvas + PixiJS / Konva

**概要**
- HTML5 Canvasを使った2Dレンダリング
- ゲームライクな複雑なアニメーションに対応

**メリット**
- 高性能なレンダリング
- 複雑なアニメーションやエフェクトが可能
- スプライトシートのサポートが充実
- 物理演算との連携が容易

**デメリット**
- 実装が複雑
- アクセシビリティの考慮が必要
- SEO的にも不利
- 学習コストが高い

---

### 6. Spine (2Dスケルタルアニメーション)

**概要**
- ゲーム業界で広く使われているスケルタルアニメーションツール
- ボーンを使った滑らかなアニメーション

**メリット**
- 非常に滑らかで自然なアニメーション
- ファイルサイズが小さい
- ランタイムで骨格を操作可能
- プロフェッショナルなゲーム品質

**デメリット**
- Spineツールが有料（$69〜$339）
- 学習コストが高い
- Webでの使用はランタイムライブラリが必要
- ゲーム開発寄りのツール
---

### 7. Three.js / React Three Fiber (3D)

**概要**
- 3Dキャラクターをブラウザで表示
- Duolingoとは異なるアプローチだが、より高度な表現が可能

**メリット**
- 3D表現が可能
- 没入感のある体験
- カメラアングルの自由度
- リアルな質感やライティングの表現

**デメリット**
- 実装が非常に複雑
- パフォーマンスへの影響が大きい
- 3Dモデリングのスキルが必要
- ファイルサイズが大きい
- Duolingoのシンプルなキャラクターには過剰

---

## なぜLottieを推奨するのか

本プロジェクトでは**Lottie**をメインのアニメーション技術として推奨します。その理由は以下の通りです：

### 1. **プロダクション実績が豊富**
- Duolingo、Uber、Netflix、Googleなど大手企業での採用実績
- 実際のプロダクトで検証済みの信頼性

### 2. **デザイナーとエンジニアの分業が明確**
- デザイナーはAfter Effectsで自由にアニメーション制作
- エンジニアはJSONファイルを読み込むだけで実装完了
- 役割が明確で、互いの専門性を活かせる

### 3. **ファイルサイズとパフォーマンスのバランスが最適**
- JSONベースで非常に軽量（数KB〜数十KB）
- ベクターベースで解像度に依存しない
- 画像スプライトと比較して1/10以下のサイズ

### 4. **クロスプラットフォーム対応**
- Web（Next.js）、Mobile（React Native）の両方で同じアニメーションを使用可能
- 一度作成すれば、すべてのプラットフォームで再利用できる
- 本プロジェクトのモノレポ構成と相性が良い

### 5. **柔軟な制御が可能**
- 再生、停止、速度変更、特定フレームへのジャンプなど
- JavaScriptから動的にアニメーションを制御
- ユーザーのアクションに応じた細かい演出が可能

### 6. **学習コストが低い**
- Reactでの実装は`lottie-react`を使えば数行で完結
- デザイナーはAfter Effectsという業界標準ツールを使用
- 新しいツールの学習が不要

### 7. **無料で豊富なリソース**
- [LottieFiles](https://lottiefiles.com/)で無料アニメーション素材が豊富
- コミュニティが活発で情報が多い
- プロトタイピング段階で既存アニメーションを試せる

### 8. **メンテナンス性が高い**
- アニメーションの修正はAfter Effectsで行い、再度JSONを書き出すだけ
- コードの変更が不要
- デザインの反復が容易
